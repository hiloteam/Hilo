/**
 * Hilo 1.1.2 for standalone
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
!function(o){function n(o){var n,e,r=/\/?[^\/]+\.(\w+)(\?\S+)?$/i;return(n=o.match(r))&&(e=n[1].toLowerCase()),e||null}o.Hilo||(o.Hilo={});var e=o.Hilo.Class,r=o.Hilo.EventMixin,t=o.Hilo.ImageLoader,a=o.Hilo.ScriptLoader,i=e.create({Mixes:r,constructor:function(o){this._source=[],this.add(o)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(o){var n=this;return o&&(o=o instanceof Array?o:[o],n._source=n._source.concat(o)),n},get:function(o){if(o)for(var n=this._source,e=0;e<n.length;e++){var r=n[e];if(r.id===o||r.src===o)return r}return null},getContent:function(o){var n=this.get(o);return n&&n.content},start:function(){var o=this;return o._loadNext(),o},_loadNext:function(){var o=this,n=o._source,e=n.length;if(o._loaded>=e)return void o.fire("complete");if(o._currentIndex<e-1&&o._connections<o.maxConnections){var r=++o._currentIndex,t=n[r],a=o._getLoader(t);if(a){var i=a.onLoad,c=a.onError;a.onLoad=function(n){a.onLoad=i,a.onError=c;var e=i&&i.call(a,n)||n.target;o._onItemLoad(r,e)},a.onError=function(n){a.onLoad=i,a.onError=c,c&&c.call(a,n),o._onItemError(r,n)},o._connections++}o._loadNext(),a&&a.load(t)}},_getLoader:function(o){var e=o.loader;if(e)return e;var r=o.type||n(o.src);switch(r){case"png":case"jpg":case"jpeg":case"gif":case"webp":e=new t;break;case"js":case"jsonp":e=new a}return e},_onItemLoad:function(o,n){var e=this,r=e._source[o];r.loaded=!0,r.content=n,e._connections--,e._loaded++,e.fire("load",r),e._loadNext()},_onItemError:function(o,n){var e=this,r=e._source[o];r.error=n,e._connections--,e._loaded++,e.fire("error",r),e._loadNext()},getSize:function(o){for(var n=0,e=this._source,r=0;r<e.length;r++){var t=e[r];n+=(o?t.loaded&&t.size:t.size)||0}return n},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});o.Hilo.LoadQueue=i}(window);