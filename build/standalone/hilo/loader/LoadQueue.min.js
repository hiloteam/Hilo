/**
 * Hilo 1.0.1 for standalone
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
!function(n){function e(n){var e,o,r=/\/?[^\/]+\.(\w+)(\?\S+)?$/i;return(e=n.match(r))&&(o=e[1].toLowerCase()),o||null}var o=n.Hilo,r=o.Class,t=o.EventMixin,a=o.ImageLoader,c=o.ScriptLoader,i=r.create({Mixes:t,constructor:function(n){this._source=[],this.add(n)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(n){var e=this;return n&&(n=n instanceof Array?n:[n],e._source=e._source.concat(n)),e},get:function(n){if(n)for(var e=this._source,o=0;o<e.length;o++){var r=e[o];if(r.id===n||r.src===n)return r}return null},getContent:function(n){var e=this.get(n);return e&&e.content},start:function(){var n=this;return n._loadNext(),n},_loadNext:function(){var n=this,e=n._source,o=e.length;if(n._loaded>=o)return void n.fire("complete");if(n._currentIndex<o-1&&n._connections<n.maxConnections){var r=++n._currentIndex,t=e[r],a=n._getLoader(t);if(a){var c=a.onLoad,i=a.onError;a.onLoad=function(e){a.onLoad=c,a.onError=i;var o=c&&c.call(a,e)||e.target;n._onItemLoad(r,o)},a.onError=function(e){a.onLoad=c,a.onError=i,i&&i.call(a,e),n._onItemError(r,e)},n._connections++}n._loadNext(),a&&a.load(t)}},_getLoader:function(n){var o=n.loader;if(o)return o;var r=n.type||e(n.src);switch(r){case"png":case"jpg":case"jpeg":case"gif":o=new a;break;case"js":case"jsonp":o=new c}return o},_onItemLoad:function(n,e){var o=this,r=o._source[n];r.loaded=!0,r.content=e,o._connections--,o._loaded++,o.fire("load",r),o._loadNext()},_onItemError:function(n,e){var o=this,r=o._source[n];r.error=e,o._connections--,o._loaded++,o.fire("error",r),o._loadNext()},getSize:function(n){for(var e=0,o=this._source,r=0;r<o.length;r++){var t=o[r];e+=(n?t.loaded&&t.size:t.size)||0}return e},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});o.LoadQueue=i}(window);