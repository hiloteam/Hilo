/**
 * Hilo 1.1.2 for standalone
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
!function(t){t.Hilo||(t.Hilo={});var e=t.Hilo.Class,i=t.Hilo,r=t.Hilo.Container,n=t.Hilo.Bitmap,h=e.create({Extends:r,constructor:function(t){t=t||{},this.id=this.id||t.id||i.getUid("BitmapText"),h.superclass.constructor.call(this,t);var e=t.text+"";e&&(this.text="",this.setText(e)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(t){var e=this,i=t.toString(),r=i.length;if(e.text!=i){e.text=i;var n,h,a,l,s=0,o=0,c=0;for(n=0;n<r;n++)h=i.charAt(n),a=e.glyphs[h],a&&(c=s+(s>0?e.letterSpacing:0),e.children[n]?(l=e.children[n],l.setImage(a.image,a.rect)):(l=e._createBitmap(a),e.addChild(l)),l.x=c,s=c+a.rect[2],o=Math.max(o,a.rect[3]));for(n=e.children.length-1;n>=r;n--)e._releaseBitmap(e.children[n]),e.children[n].removeFromParent();return e.width=s,e.height=o,this.setTextAlign(),e}},_createBitmap:function(t){var e;return h._pool.length?(e=h._pool.pop(),e.setImage(t.image,t.rect)):e=new n({image:t.image,rect:t.rect}),e},_releaseBitmap:function(t){h._pool.push(t)},setTextAlign:function(t){switch(this.textAlign=t||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0}return this},hasGlyphs:function(t){var e=this.glyphs;if(!e)return!1;t=t.toString();var i,r=t.length;for(i=0;i<r;i++)if(!e[t.charAt(i)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(t,e,i,r){var n=t.toString();i=i||n.length,r=r||1;for(var h=e.width/i,a=e.height/r,l={},s=0,o=t.length;s<o;s++){var c=n.charAt(s);l[c]={image:e,rect:[h*(s%i),a*Math.floor(s/i),h,a]}}return l}}});t.Hilo.BitmapText=h}(window);