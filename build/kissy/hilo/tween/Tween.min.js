/**
 * Hilo 1.0.0 for kissy
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
KISSY.add("hilo/tween/Tween",function(e,t){var r=function(){function e(){return+new Date}return t.create({constructor:function(e,t,r,a){var n=this;n.target=e,n._startTime=0,n._seekTime=0,n._pausedTime=0,n._pausedStartTime=0,n._reverseFlag=1,n._repeatCount=0,3==arguments.length&&(a=r,r=t,t=null);for(var i in a)n[i]=a[i];n.setProps(t,r),!a.duration&&a.time&&(n.duration=a.time||0,n.time=0)},target:null,duration:0,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(e,t){var r=this,a=r.target,n=e||t,i=r._fromProps={},s=r._toProps={};e=e||a,t=t||a;for(var u in n)s[u]=t[u]||0,a[u]=i[u]=e[u]||0;return r},start:function(){var t=this;return t._startTime=e()+t.delay,t._seekTime=0,t._pausedTime=0,t.paused=!1,r.add(t),t},stop:function(){return r.remove(this),this},pause:function(){var t=this;return t.paused=!0,t._pausedStartTime=e(),t},resume:function(){var t=this;return t.paused=!1,t._pausedStartTime&&(t._pausedTime+=e()-t._pausedStartTime),t._pausedStartTime=0,t},seek:function(t,a){var n=this,i=e();return n._startTime=i,n._seekTime=t,n._pausedTime=0,void 0!==a&&(n.paused=a),n._update(i,!0),r.add(n),n},link:function(e){var t=this,a=e.delay,n=t._startTime;if("string"==typeof a){var i=0==a.indexOf("+"),s=0==a.indexOf("-");a=i||s?Number(a.substr(1))*(i?1:-1):Number(a)}return e.delay=a,e._startTime=i||s?n+t.duration+a:n+a,t._next=e,r.remove(e),t},_render:function(e){var t,r=this,a=r.target,n=r._fromProps;for(t in n)a[t]=n[t]+(r._toProps[t]-n[t])*e},_update:function(t,a){var n=this;if(!n.paused||a){var i=t-n._startTime-n._pausedTime+n._seekTime;if(!(0>i)){var s,u=i/n.duration,o=!1;u=0>=u?0:u>=1?1:n.ease?n.ease(u):u,n.reverse&&(n._reverseFlag<0&&(u=1-u),1e-7>u&&(n.repeat>0&&n._repeatCount++>=n.repeat||0==n.repeat&&!n.loop?o=!0:(n._startTime=e(),n._pausedTime=0,n._reverseFlag*=-1))),0==n.time&&(s=n.onStart)&&s.call(n,n),n.time=i,n._render(u),(s=n.onUpdate)&&s.call(n,u,n),u>=1&&(n.reverse?(n._startTime=e(),n._pausedTime=0,n._reverseFlag*=-1):n.loop||n.repeat>0&&n._repeatCount++<n.repeat?(n._startTime=e()+n.repeatDelay,n._pausedTime=0):o=!0);var l=n._next;if(l&&l.time<=0){var d=l._startTime;d>0&&t>=d?(l._render(u),l.time=i,r.add(l)):o&&(0>d||d>t)&&l.start()}return o?((s=n.onComplete)&&s.call(n,n),!0):void 0}}},Statics:{_tweens:[],tick:function(){var t,a,n=r._tweens,i=n.length;for(a=0;i>a;a++)t=n[a],t&&t._update(e())&&(n.splice(a,1),a--);return r},add:function(e){var t=r._tweens;return-1==t.indexOf(e)&&t.push(e),r},remove:function(e){if(e instanceof Array){for(var t=0,a=e.length;a>t;t++)r.remove(e[t]);return r}var t,n=r._tweens;if(e instanceof r)t=n.indexOf(e),t>-1&&n.splice(t,1);else for(t=0;t<n.length;t++)n[t].target===e&&(n.splice(t,1),t--);return r},removeAll:function(){return r._tweens.length=0,r},fromTo:function(e,t,a,n){var i=e instanceof Array;e=i?e:[e];var s,u,o=n.stagger,l=[];for(u=0;u<e.length;u++)s=new r(e[u],t,a,n),o&&(s.delay=(n.delay||0)+(u*o||0)),s.start(),l.push(s);return i?l:s},to:function(e,t,a){return r.fromTo(e,null,t,a)},from:function(e,t,a){return r.fromTo(e,t,null,a)}}})}();return r},{requires:["hilo/core/Class"]});