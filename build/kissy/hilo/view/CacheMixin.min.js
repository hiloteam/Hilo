/**
 * Hilo 1.0.2 for kissy
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
KISSY.add("hilo/view/CacheMixin",function(a,t,e){var h={_cacheDirty:!0,_cacheCanvas:null,_cacheContext:null,cache:function(a){(a||this._cacheDirty||!this._cacheImage)&&this.updateCache()},updateCache:function(){var a=this._cacheCanvas,h=this._cacheContext;t.browser.supportCanvas&&(a||(a=this._cacheCanvas=document.createElement("canvas"),h=this._cacheContext=this._cacheCanvas.getContext("2d")),a.width=Math.max(a.width,this.width),a.height=Math.max(a.height,this.height),h.clearRect(0,0,a.width,a.height),this._draw(h),this._cacheImage=new Image,this._cacheImage.src=a.toDataURL(),this.drawable=this.drawable||new e,this.drawable.init(this._cacheImage),this._cacheDirty=!1)},setCacheDirty:function(a){this._cacheDirty=a}};return h},{requires:["hilo/core/Hilo","hilo/view/Drawable"]});