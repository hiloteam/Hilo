/**
 * Hilo 1.0.1 for commonjs
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
var Class=require("../core/Class"),TextureAtlas=function(){function r(r){var t=r.frames;if(!t)return null;var e,a=[];if(t instanceof Array)for(var n=0,i=t.length;n<i;n++)e=t[n],a[n]={image:r.image,rect:e};else for(var s=t.frameWidth,o=t.frameHeight,f=r.width/s|0,u=r.height/o|0,l=t.numFrames||f*u,n=0;n<l;n++)a[n]={image:r.image,rect:[n%f*s,(n/f|0)*o,s,o]};return a}function t(r,t){var n=r.sprites;if(!n)return null;var i,s,o,f={};for(var u in n){if(i=n[u],a(i))s=e(t[i]);else if(i instanceof Array){s=[];for(var l=0,c=i.length;l<c;l++){var m,h=i[l];a(h)?o=e(t[h]):(m=h.rect,a(m)&&(m=t[h.rect]),o=e(m,h)),s[l]=o}}else{s=[];for(var l=i.from;l<=i.to;l++)s[l-i.from]=e(t[l],i[l])}f[u]=s}return f}function e(r,t){var e={image:r.image,rect:r.rect};return t&&(e.name=t.name||null,e.duration=t.duration||0,e.stop=!!t.stop,e.next=t.next||null),e}function a(r){return"number"==typeof r}return Class.create({constructor:function(e){this._frames=r(e),this._sprites=t(e,this._frames)},_frames:null,_sprites:null,getFrame:function(r){var t=this._frames;return t&&t[r]},getSprite:function(r){var t=this._sprites;return t&&t[r]},Statics:{createSpriteFrames:function(r,t,e,a,n,i,s){if("[object Array]"===Object.prototype.toString.call(r)){for(var t=[],o=0,f=r.length;o<f;o++)t=t.concat(this.createSpriteFrames.apply(this,r[o]));return t}if("string"==typeof t){var u=t.split(",");t=[];for(var l=0,c=u.length;l<c;l++){var m=u[l].split("-");if(1==m.length)t.push(parseInt(m[0]));else for(var o=parseInt(m[0]),f=parseInt(m[1]);o<=f;o++)t.push(o)}}for(var h=Math.floor(e.width/a),o=0;o<t.length;o++){var p=t[o];t[o]={rect:[a*(p%h),n*Math.floor(p/h),a,n],image:e,duration:s}}return t[0].name=r,i?t[t.length-1].next=r:t[t.length-1].stop=!0,t}}})}();module.exports=TextureAtlas;